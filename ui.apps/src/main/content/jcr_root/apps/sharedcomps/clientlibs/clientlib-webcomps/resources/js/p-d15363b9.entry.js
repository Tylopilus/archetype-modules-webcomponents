import{g as t,f as s,r as i,h as e,H as h}from"./p-643cfe3b.js";const n=t=>!("isConnected"in t)||t.isConnected,o=(()=>{let t;return(...s)=>{t&&clearTimeout(t),t=setTimeout((()=>{t=0,(t=>{for(let s of t.keys())t.set(s,t.get(s).filter(n))})(...s)}),2e3)}})(),{state:r,onChange:l}=(()=>{const i=((t,s=((t,s)=>t!==s))=>{let i=new Map(Object.entries(null!=t?t:{}));const e={dispose:[],get:[],set:[],reset:[]},h=()=>{i=new Map(Object.entries(null!=t?t:{})),e.reset.forEach((t=>t()))},n=t=>(e.get.forEach((s=>s(t))),i.get(t)),o=(t,h)=>{const n=i.get(t);s(h,n,t)&&(i.set(t,h),e.set.forEach((s=>s(t,h,n))))},r="undefined"==typeof Proxy?{}:new Proxy(t,{get:(t,s)=>n(s),ownKeys:()=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,s)=>i.has(s),set:(t,s,i)=>(o(s,i),!0)}),l=(t,s)=>(e[t].push(s),()=>{((t,s)=>{const i=t.indexOf(s);i>=0&&(t[i]=t[t.length-1],t.length--)})(e[t],s)});return{state:r,get:n,set:o,on:l,onChange:(s,i)=>{const e=l("set",((t,e)=>{t===s&&i(e)})),h=l("reset",(()=>i(t[s])));return()=>{e(),h()}},use:(...t)=>t.forEach((t=>{t.set&&l("set",t.set),t.get&&l("get",t.get),t.reset&&l("reset",t.reset)})),dispose:()=>{e.dispose.forEach((t=>t())),h()},reset:h,forceUpdate:t=>{const s=i.get(t);e.set.forEach((i=>i(t,s,s)))}}})({input:""},void 0);return(({on:i})=>{const e=new Map;"function"==typeof t&&(i("dispose",(()=>{e.clear()})),i("get",(s=>{const i=t();i&&((t,s,i)=>{const e=t.get(s);e?e.includes(i)||e.push(i):t.set(s,[i])})(e,s,i)})),i("set",(t=>{const i=e.get(t);i&&e.set(t,i.filter(s)),o(e)})),i("reset",(()=>{e.forEach((t=>t.forEach(s))),o(e)})))})(i),i})();l("input",(t=>{r.input=t}));const c=class{constructor(t){i(this,t),this.handleChange=t=>{this.text=t.target.value,r.input=this.text},this.handleClick=()=>{this.text=""},this.loadState=()=>{this.text=r.input}}render(){return e(h,null,e("input",{type:"text",value:this.text,onInput:this.handleChange}),e("button",{onClick:this.handleClick},"clear"),e("button",{onClick:this.loadState},"load"))}};c.style=":host{display:block}";const a=class{constructor(t){i(this,t),this.board=void 0,this.winner=void 0,this.gameOver=!1,this.moves=0,this.turn="X",this.isEmpty=(t,s,i)=>""===t[s][i],this.setWinner=t=>{this.winner=t},this.resetBoard=()=>{this.board=this.updateBoard(void 0),this.winner=void 0,this.turn="X",this.moves=0,this.gameOver=!1},this.checkWinner=()=>{let t;for(let s=0;s<3;s++)this.board[s][0]===this.board[s][1]&&this.board[s][0]===this.board[s][2]&&this.board[s][0]&&(t=this.board[s][0]);for(let s=0;s<3;s++)this.board[0][s]===this.board[1][s]&&this.board[0][s]===this.board[2][s]&&this.board[0][s]&&(t=this.board[0][s]);return this.board[0][0]===this.board[1][1]&&this.board[0][0]===this.board[2][2]&&(t=this.board[0][0]),this.board[2][0]===this.board[1][1]&&this.board[0][2]===this.board[2][0]&&(t=this.board[2][0]),9!==this.moves||t||(t="draw"),t},this.updateBoard=(t,s,i)=>{if(!t)return[["","",""],["","",""],["","",""]];if(void 0!==s&&void 0!==i){if(!this.isEmpty(t,s,i))return;this.board[s][i]=this.turn,this.board=[...this.board]}const e=this.checkWinner();e&&(this.setWinner(e),this.gameOver=!0)},this.makeMove=(t,s)=>{this.gameOver||(this.moves++,this.updateBoard(this.board,t,s),this.turn="X"===this.turn?"O":"X")},this.board=this.updateBoard(this.board)}render(){return e("div",{class:"board"},e("button",{onClick:this.resetBoard},"reset"),this.winner&&e("span",{class:"winner"},"Winner is: ",this.winner),e("table",null,e("tbody",null,this.board.map(((t,s)=>e("tr",null,t.map(((t,i)=>e("td",{onClick:()=>this.makeMove(s,i)},t)))))))))}};a.style=":host{display:block}.board{width:80%;margin:0 auto}table{width:100%;font-size:12rem}td{text-align:center;border:1px solid black;width:1em;height:1.2em}.winner{font-weight:bolder;font-size:2rem}";const u=class{constructor(t){i(this,t)}render(){return e(h,null,e("div",null,"hi ",this.name,", ",r.input))}};u.style=":host{display:block}";export{c as my_input,a as my_tictactoe,u as shared_button}